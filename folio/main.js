// --- TRANSLATION DATA ---
        const translations = {
            en: {
                page_title: "hash - Developer Portfolio",
                hero_title: `I'm Suraj <span class="text-3xl">ğŸŒŒ</span>`,
                hero_subtitle: "dev | wyvernium",
                location: "New Delhi, India",
                resume: "Resume",
                schedule_meeting: "Schedule a meeting",
                about_p1: "a developer passionate about creating innovative products that solve real-world problems. Constantly exploring new technologies, I generate fresh ideas aimed at making a meaningful impact. My goal is to contribute to the tech ecosystem by pushing boundaries and delivering high-quality solutions.",
                about_p2: `My true passion lies in dreaming up interesting ideas and bringing them to life. Iâ€™m driven to build tools that not only enhance my own productivity but also help others enjoy the process of creating.`,
                leetcode_stats: "coding stats (leetcode)",
                linkedin_text: "(professional network$)",
                bluesky_text: "(sky-gazing ğŸ¦‹)",
                github_title: `GitHub å£åº§`,
                github_text: "My playground ğŸ‘¾",
                epic_builds: "Grand Designs ğŸˆï¸",
                selected_works: "Selected works",
                projects_intro: `I create robust and scalable applications, ranging from user-centric web apps to advanced AI tools. Here are a few highlights from my recent work. You can view more on my <a href="#" id="view-all-projects" class="text-green-400 hover:underline cursor-pointer" data-translate="projects_page_link">projects page</a>.`,
                projects_page_link: "projects page",
                live_btn: "Live",
                source_btn: "Source",
                connect_badge: "Connect ğŸŒ",
                contact_title: "Contact Me ğŸ’Œ",
                contact_p1: `I would love to collaborate and create something exceptional together. Feel free to reach out if you're interested in exploring new opportunities. You can connect with me via <span id="contact-trigger" class="text-green-400 hover:underline cursor-pointer" data-translate="contact_link">an email</span>. Let's make an impact!`,
                contact_link: "an email",
                about_page_title: "About me ğŸš€",
                about_page_subtitle: "Helping build the future, one line at a time.",
                about_page_bio: "Outside of programming, Iâ€™m deeply interested in a wide range of fields, including fitness, cosmology, physics, puzzles, and psychology. I also have a strong passion for the arts; whether itâ€™s music, illustration, video games, design, anime, or visual novels. While Iâ€™m constantly exploring these areas, I donâ€™t claim to be an expert in any of them; I simply dive into what fascinates me. Iâ€™m always striving to learn more and expand my horizons.",
                education_title: "Education background å­¦",
                education_degree: "B.Tech Computer Science and Engineering",
                education_details: "LIET | 2022 - 2026",
                experience_title: "The Hustle ä»•",
                exp1_date: "XXX - YYY",
                exp1_title: "A lifelong learner",
                exp1_company: "studying or experimenting",
                exp1_details: ["Collaborated with team members on coding best practices, debugging, and testing, which enhanced my problem-solving and teamwork skills.","Applied classroom knowledge of algorithms, databases, and machine learning to real-world projects, bridging the gap between theory and practice.","Worked on building a Retrieval-Augmented Generation (RAG) pipeline for semantic document search, utilizing tools like PGVector and Langchain, deepening my understanding of data retrieval and AI-powered systems.","Explored the integration of AI models with cloud services, learning to deploy and scale machine learning solutions in a cloud environment (AWS, Google Cloud, etc.)"],
                achievements_title: "Achievements æ „",
                ach1_title: `Open Source <a href="#" target="_blank" class="dark:text-slate-500 text-slate-400 hover:text-slate-200"><i data-lucide="external-link" class="w-3 h-3"></i></a>`,
                ach1_desc: "Project name",
                ach2_title: `Project name <a href="#" target="_blank" class="dark:text-slate-500 text-slate-400 hover:text-slate-200"><i data-lucide="external-link" class="w-3 h-3"></i></a>`,
                ach2_desc: "What it brings",
                ach3_title: `Some-Bot <a href="#" target="_blank" class="dark:text-slate-500 text-slate-400 hover:text-slate-200"><i data-lucide="external-link" class="w-3 h-3"></i></a>`,
                ach3_desc: "Some bot task",
                ach4_title: "Coming Soon",
                ach4_desc: "New Achievement",
                feels_title: "Feels å¥½",
                projects_page_title: "My latest builds ğŸ’»",
                projects_page_intro: "From Full Stack apps to AI-driven creations and everything in between, hereâ€™s a look at my recent projects which I did to learn, grow and experiment.",
                nav_about: "About",
                nav_projects: "Projects",
                nav_reach: "Contact",
                support_title: "Support My Work",
                support_desc: "If you like what I do, and/or wish to support my future game projects, consider supporting me!",
                support_network: "Network",
                support_wallet: "Wallet Address",
                contact_modal_title: "Get In Touch",
                contact_modal_subtitle: "Let's build something cool together.",
                contact_modal_subject: "Subject",
                contact_modal_message: "Message",
                contact_modal_button: "Send Message",
                footer_text: "Â© 2025 Wyvernium. All rights are reserved."
            },
            jp: {
                page_title: "hash - é–‹ç™ºè€…ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª",
                hero_title: `Surajã§ã™ <span class="text-3xl">ğŸŒŒ</span>`,
                hero_subtitle: "dev | wyvernium",
                location: "ãƒ‹ãƒ¥ãƒ¼ãƒ‡ãƒªãƒ¼ã€ã‚¤ãƒ³ãƒ‰",
                resume: "å±¥æ­´æ›¸",
                schedule_meeting: "ä¼šè­°ã‚’äºˆç´„",
                about_p1: "ç¾å®Ÿä¸–ç•Œã®å•é¡Œã‚’è§£æ±ºã™ã‚‹é©æ–°çš„ãªè£½å“ã‚’ä½œã‚‹ã“ã¨ã«æƒ…ç†±ã‚’æ³¨ãé–‹ç™ºè€…ã§ã™ã€‚å¸¸ã«æ–°ã—ã„æŠ€è¡“ã‚’æ¢æ±‚ã—ã€æ„å‘³ã®ã‚ã‚‹å½±éŸ¿ã‚’ä¸ãˆã‚‹ãŸã‚ã®æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç”Ÿã¿å‡ºã—ã¦ã„ã¾ã™ã€‚ç§ã®ç›®æ¨™ã¯ã€é™ç•Œã‚’æŠ¼ã—åºƒã’ã€é«˜å“è³ªã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã«è²¢çŒ®ã™ã‚‹ã“ã¨ã§ã™ã€‚",
                about_p2: `ç§ã®çœŸã®æƒ…ç†±ã¯ã€èˆˆå‘³æ·±ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ€ã„ã¤ãã€ãã‚Œã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ã«ã‚ã‚Šã¾ã™ã€‚è‡ªåˆ†è‡ªèº«ã®ç”Ÿç”£æ€§ã‚’é«˜ã‚ã‚‹ã ã‘ã§ãªãã€ä»–ã®äººã€…ãŒå‰µé€ ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ¥½ã—ã‚ã‚‹ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ã“ã¨ã«é§†ã‚Šç«‹ã¦ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚`,
                leetcode_stats: "LeetCodeã®çµ±è¨ˆ",
                linkedin_text: "(ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯)",
                bluesky_text: "(ç©ºã‚’è¦‹ä¸Šã’ã¦ ğŸ¦‹)",
                github_title: "GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ",
                github_text: "ç§ã®éŠã³å ´ ğŸ‘¾",
                epic_builds: "ã‚°ãƒ©ãƒ³ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ ğŸˆï¸",
                selected_works: "å³é¸ä½œå“",
                projects_intro: `ç§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸­å¿ƒã®Webã‚¢ãƒ—ãƒªã‹ã‚‰é«˜åº¦ãªAIãƒ„ãƒ¼ãƒ«ã¾ã§ã€å …ç‰¢ã§ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚ŒãŒç§ã®æœ€è¿‘ã®ä½œå“ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã§ã™ã€‚è©³ç´°ã¯<a href="#" id="view-all-projects" class="text-green-400 hover:underline cursor-pointer" data-translate="projects_page_link">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸</a>ã§ã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚`,
                projects_page_link: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸",
                live_btn: "ãƒ©ã‚¤ãƒ–",
                source_btn: "ã‚½ãƒ¼ã‚¹",
                connect_badge: "æ¥ç¶š ğŸŒ",
                contact_title: "ãŠå•ã„åˆã‚ã› ğŸ’Œ",
                contact_p1: `ä¸€ç·’ã«ç´ æ™´ã‚‰ã—ã„ã‚‚ã®ã‚’ä½œã‚ŠãŸã„ã§ã™ã€‚æ–°ã—ã„æ©Ÿä¼šã«èˆˆå‘³ãŒã‚ã‚Œã°ã€ãŠæ°—è»½ã«ã”é€£çµ¡ãã ã•ã„ã€‚<span id="contact-trigger" class="text-green-400 hover:underline cursor-pointer" data-translate="contact_link">ãƒ¡ãƒ¼ãƒ«ã§</span>ã”é€£çµ¡ã„ãŸã ã‘ã¾ã™ã€‚ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆã‚’ä¸ãˆã¾ã—ã‚‡ã†ï¼`,
                contact_link: "ãƒ¡ãƒ¼ãƒ«ã§",
                about_page_title: "ç§ã«ã¤ã„ã¦ ğŸš€",
                about_page_subtitle: "æœªæ¥ã‚’ç¯‰ãæ‰‹åŠ©ã‘ã‚’ã€ä¸€è¡Œãšã¤ã€‚",
                about_page_bio: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ä»¥å¤–ã§ã¯ã€ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã€å®‡å®™è«–ã€ç‰©ç†å­¦ã€ãƒ‘ã‚ºãƒ«ã€å¿ƒç†å­¦ãªã©ã€å¹…åºƒã„åˆ†é‡ã«æ·±ã„èˆˆå‘³ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã¾ãŸã€éŸ³æ¥½ã€ã‚¤ãƒ©ã‚¹ãƒˆã€ãƒ“ãƒ‡ã‚ªã‚²ãƒ¼ãƒ ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã€ã‚¢ãƒ‹ãƒ¡ã€ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒãƒ™ãƒ«ãªã©ã€èŠ¸è¡“ã«ã‚‚å¼·ã„æƒ…ç†±ã‚’æŠ±ã„ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®åˆ†é‡ã‚’å¸¸ã«æ¢æ±‚ã—ã¦ã„ã¾ã™ãŒã€å°‚é–€å®¶ã§ã‚ã‚‹ã¨ã¯ä¸»å¼µã—ã¾ã›ã‚“ã€‚å˜ã«ç§ã‚’é­…äº†ã™ã‚‹ã‚‚ã®ã«æ²¡é ­ã—ã¦ã„ã‚‹ã ã‘ã§ã™ã€‚å¸¸ã«ã‚ˆã‚Šå¤šãã‚’å­¦ã³ã€è¦–é‡ã‚’åºƒã’ã‚‹ã‚ˆã†åŠªã‚ã¦ã„ã¾ã™ã€‚",
                education_title: "å­¦æ­´ â€¢ Education",
                education_degree: "B.Tech ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ï¼†ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°",
                education_details: "LIET | 2022 - 2026",
                experience_title: "ãƒãƒƒã‚¹ãƒ« â€¢ The Hustle",
                exp1_date: "XXX - YYY",
                exp1_title: "ç”Ÿæ¶¯å­¦ç¿’è€…",
                exp1_company: "å­¦ç¿’ã¨å®Ÿé¨“",
                exp1_details: ["ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ãƒ‡ãƒãƒƒã‚°ã€ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨å”åŠ›ã—ã€å•é¡Œè§£æ±ºèƒ½åŠ›ã¨ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ã¾ã—ãŸã€‚","ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€æ©Ÿæ¢°å­¦ç¿’ã«é–¢ã™ã‚‹æ•™å®¤ã§ã®çŸ¥è­˜ã‚’å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿œç”¨ã—ã€ç†è«–ã¨å®Ÿè·µã®ã‚®ãƒ£ãƒƒãƒ—ã‚’åŸ‹ã‚ã¾ã—ãŸã€‚","PGVectorã‚„Langchainãªã©ã®ãƒ„ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã—ã¦ã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãªæ–‡æ›¸æ¤œç´¢ã®ãŸã‚ã®Retrieval-Augmented Generation (RAG) ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰ã«å–ã‚Šçµ„ã¿ã€ãƒ‡ãƒ¼ã‚¿æ¤œç´¢ã¨AIæ­è¼‰ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ç†è§£ã‚’æ·±ã‚ã¾ã—ãŸã€‚","AIãƒ¢ãƒ‡ãƒ«ã¨ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®çµ±åˆã‚’æ¢æ±‚ã—ã€ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒï¼ˆAWSã€Google Cloudãªã©ï¼‰ã§æ©Ÿæ¢°å­¦ç¿’ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å±•é–‹ãƒ»æ‹¡å¼µã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚"],
                achievements_title: "å®Ÿç¸¾ â€¢ Achievements",
                ach1_title: `Open Source <a href="#" target="_blank" class="dark:text-slate-500 text-slate-400 hover:text-slate-200"><i data-lucide="external-link" class="w-3 h-3"></i></a>`,
                ach1_desc: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå",
                ach2_title: `ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå <a href="#" target="_blank" class="dark:text-slate-500 text-slate-400 hover:text-slate-200"><i data-lucide="external-link" class="w-3 h-3"></i></a>`,
                ach2_desc: "ãã‚ŒãŒã‚‚ãŸã‚‰ã™ã‚‚ã®",
                ach3_title: `Some-Bot <a href="#" target="_blank" class="dark:text-slate-500 text-slate-400 hover:text-slate-200"><i data-lucide="external-link" class="w-3 h-3"></i></a>`,
                ach3_desc: "ãƒœãƒƒãƒˆã®ã‚¿ã‚¹ã‚¯",
                ach4_title: "è¿‘æ—¥å…¬é–‹",
                ach4_desc: "æ–°ã—ã„å®Ÿç¸¾",
                feels_title: "é›°å›²æ°— â€¢ Feels",
                projects_page_title: "ç§ã®æœ€æ–°ãƒ“ãƒ«ãƒ‰ ğŸ’»",
                projects_page_intro: "ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¢ãƒ—ãƒªã‹ã‚‰AIé§†å‹•ã®å‰µä½œç‰©ã¾ã§ã€ãã—ã¦ãã®é–“ã®ã™ã¹ã¦ã€‚å­¦ç¿’ã€æˆé•·ã€å®Ÿé¨“ã®ãŸã‚ã«ç§ãŒè¡Œã£ãŸæœ€è¿‘ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚",
                nav_about: "æ¦‚è¦",
                nav_projects: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ",
                nav_reach: "é€£çµ¡",
                support_title: "ç§ã®ä»•äº‹ã‚’æ”¯æ´",
                support_desc: "ã‚‚ã—ç§ã®æ´»å‹•ãŒæ°—ã«å…¥ã£ã¦ã€å°†æ¥ã®ã‚²ãƒ¼ãƒ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ”¯æ´ã—ãŸã„ã¨æ€ã£ã¦ã„ãŸã ã‘ã‚‹ãªã‚‰ã€æ”¯æ´ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ï¼",
                support_network: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯",
                support_wallet: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹",
                contact_modal_title: "é€£çµ¡ã™ã‚‹",
                contact_modal_subtitle: "ä¸€ç·’ã«ã‚¯ãƒ¼ãƒ«ãªã‚‚ã®ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚",
                contact_modal_subject: "ä»¶å",
                contact_modal_message: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
                contact_modal_button: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡",
                footer_text: "Â© 2025 Wyvernium. å…¨è‘—ä½œæ¨©æ‰€æœ‰ã€‚"
            }
        };
        
        // --- LeetCode Stats Fetcher ---
        async function fetchLeetCodeStats() {
            const statsEl = document.getElementById('leetcode-stats');
            if (!statsEl) return;

            try {
                // Using a CORS proxy to fetch LeetCode stats
                const response = await fetch('https://leetcode-stats-api.herokuapp.com/peelapatta');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                if (data.totalSolved) {
                    statsEl.textContent = data.totalSolved;
                } else {
                     statsEl.textContent = '300+'; // Fallback if data is not as expected
                }
            } catch (error) {
                console.error('Failed to fetch LeetCode stats:', error);
                statsEl.textContent = '300+'; // Fallback on error
            }
        }

        // --- Animate Clock ---
        function animateClock() {
            const progressRing = document.getElementById('progress-ring');
            if(!progressRing) return;
            const radius = progressRing.r.baseVal.value;
            const circumference = 2 * Math.PI * radius;
            progressRing.style.strokeDasharray = `${circumference} ${circumference}`;
            
            function tick() {
                const now = new Date();
                const totalMillisecondsInMinute = 60 * 1000;
                const currentMillisecondsInMinute = (now.getSeconds() * 1000) + now.getMilliseconds();
                const progress = currentMillisecondsInMinute / totalMillisecondsInMinute;
                
                // Smooth reset logic
                if (progress < 0.05) { // A small buffer
                    progressRing.style.transition = 'none';
                } else {
                    progressRing.style.transition = 'stroke-dashoffset 0.35s linear';
                }

                const offset = circumference * (1 - progress);
                progressRing.style.strokeDashoffset = offset;
                
                requestAnimationFrame(tick);
            }
            tick();
        }
        
        // --- Time Display ---
        function updateTime() {
             const timeEl = document.querySelector('#time-display span');
            if (timeEl) {
                const time = new Date().toLocaleTimeString('en-US', {
                    timeZone: 'Asia/Kolkata',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                });
                timeEl.textContent = time;
            }
        }
        
        // --- Interactive Globe ---
        function setupGlobe() {
            const globeContainer = document.getElementById('globe-container');
            if (!globeContainer || typeof THREE === 'undefined') return;

            let scene, camera, renderer, globe, points, wireframe, particlesMaterial;
            let mouse = { x: 0, y: 0 };
            let baseRotationY = 0;
            let isHovering = false;
            
            function updateGlobeColors() {
                const isDarkMode = document.documentElement.classList.contains('dark');
                const wireframeColor = isDarkMode ? 0x444444 : 0xcccccc;
                const particlesColor = isDarkMode ? 0xcccccc : 0x555555;
                if(wireframe) wireframe.material.color.setHex(wireframeColor);
                if(particlesMaterial) particlesMaterial.color.setHex(particlesColor);
            }

            function init() {
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(45, globeContainer.clientWidth / globeContainer.clientHeight, 0.1, 1000);
                camera.position.z = 5;
                renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                renderer.setSize(globeContainer.clientWidth, globeContainer.clientHeight);
                renderer.setPixelRatio(window.devicePixelRatio);
                globeContainer.appendChild(renderer.domElement);
                const globeGeometry = new THREE.SphereGeometry(1.5, 32, 32);
                const globeMaterial = new THREE.MeshPhongMaterial({ color: 0xaaaaaa, transparent: true, opacity: 0.1, shininess: 10, specular: 0x111111 });
                globe = new THREE.Mesh(globeGeometry, globeMaterial);
                scene.add(globe);
                wireframe = new THREE.LineSegments( new THREE.WireframeGeometry(globeGeometry), new THREE.LineBasicMaterial({ transparent: true, opacity: 0.5 }) );
                globe.add(wireframe);
                const particlesGeometry = new THREE.BufferGeometry;
                const particlesCnt = 1500;
                const posArray = new Float32Array(particlesCnt * 3);
                for(let i=0; i < particlesCnt * 3; i++) {
                    const x = (Math.random() - 0.5) * 5, y = (Math.random() - 0.5) * 5, z = (Math.random() - 0.5) * 5;
                    const d = Math.sqrt(x*x + y*y + z*z);
                    posArray[i] = (x/d) * 1.5; posArray[i+1] = (y/d) * 1.5; posArray[i+2] = (z/d) * 1.5;
                }
                particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                particlesMaterial = new THREE.PointsMaterial({ size: 0.005 });
                points = new THREE.Points(particlesGeometry, particlesMaterial);
                scene.add(points);
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                scene.add(ambientLight);
                const pointLight = new THREE.PointLight(0xffffff, 0.8);
                pointLight.position.set(5, 5, 5);
                scene.add(pointLight);
                updateGlobeColors();
                globeContainer.addEventListener('mousemove', onMouseMove, false);
                globeContainer.addEventListener('mouseenter', () => { isHovering = true; });
                globeContainer.addEventListener('mouseleave', () => { isHovering = false; mouse.x = 0; mouse.y = 0; });
                window.addEventListener('resize', onWindowResize, false);
            }

            function onMouseMove(event) {
                const rect = globeContainer.getBoundingClientRect();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -(((event.clientY - rect.top) / rect.height) * 2 - 1);
            }

            function onWindowResize() {
                if (!globeContainer) return;
                camera.aspect = globeContainer.clientWidth / globeContainer.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(globeContainer.clientWidth, globeContainer.clientHeight);
            }

            function animate() {
                requestAnimationFrame(animate);
                const rotationSpeed = isHovering ? 0.02 : 0.005;
                const targetParticleScale = isHovering ? 1.35 : 1.0;
                baseRotationY += rotationSpeed;
                const mouseOffsetX = mouse.y * 0.8;
                const mouseOffsetY = mouse.x * 0.8;
                globe.rotation.y += (baseRotationY + mouseOffsetY - globe.rotation.y) * 0.08;
                globe.rotation.x += (mouseOffsetX - globe.rotation.x) * 0.08;
                const scaleVec = new THREE.Vector3(targetParticleScale, targetParticleScale, targetParticleScale);
                points.scale.lerp(scaleVec, 0.08);
                points.rotation.y = globe.rotation.y;
                points.rotation.x = globe.rotation.x;
                renderer.render(scene, camera);
            }
            
            init();
            animate();
            
            const themeObserver = new MutationObserver((mutationsList) => {
                for(const mutation of mutationsList) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        updateGlobeColors();
                    }
                }
            });
            themeObserver.observe(document.documentElement, { attributes: true });
        }
        
        // Initialize everything on load
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            
            // --- Dev Console Easter Egg ---
            console.log("%cHey there, fellow developer! ğŸ‘‹", "color: #4ade80; font-size: 24px; font-weight: bold;");
            console.log("%cGlad you stopped by to check out the code. If you like what you see, let's connect on LinkedIn!", "font-size: 14px;");

            // --- Page Navigation Logic ---
            const mainPage = document.getElementById('main-page');
            const aboutPage = document.getElementById('about-page');
            const projectsPage = document.getElementById('projects-page');
            const navHome = document.getElementById('nav-home');
            const navAD = document.getElementById('nav-ad');
            const navProjects = document.getElementById('nav-projects');
            const navContact = document.getElementById('nav-contact');
            const viewAllProjectsLink = document.getElementById('view-all-projects');
            
            const allNavLinks = [navAD, navProjects, navContact];
            const darkActive = 'bg-white/20';
            const lightActive = 'bg-black/10';

            function setActive(activeLink) {
                allNavLinks.forEach(link => {
                    link.classList.remove(darkActive, lightActive);
                });
                const activeClass = document.documentElement.classList.contains('dark') ? darkActive : lightActive;
                if(activeLink) activeLink.classList.add(activeClass);
            }
            
            function showPage(pageToShow) {
                [mainPage, aboutPage, projectsPage].forEach(page => page.classList.add('hidden'));
                pageToShow.classList.remove('hidden');

                pageToShow.classList.remove('animate-content-enter');
                void pageToShow.offsetWidth;
                pageToShow.classList.add('animate-content-enter');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            navHome.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(mainPage);
                setActive(null);
                setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 0);
            });

            navAD.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(aboutPage);
                setActive(navAD);
            });

            navProjects.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(projectsPage);
                setActive(navProjects);
            });

             viewAllProjectsLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(projectsPage);
                setActive(navProjects);
            });
            
            navContact.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(mainPage);
                setActive(navContact);
                 setTimeout(() => document.getElementById('contact')?.scrollIntoView({ behavior: 'smooth' }), 100);
            });

            // --- Theme Toggle Logic ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const htmlEl = document.documentElement;
            const sunIcon = themeToggleBtn.querySelector('[data-lucide="sun"]');
            const moonIcon = themeToggleBtn.querySelector('[data-lucide="moon"]');

            function updateThemeIcons() {
                if (htmlEl.classList.contains('dark')) {
                    sunIcon.classList.remove('hidden');
                    moonIcon.classList.add('hidden');
                } else {
                    sunIcon.classList.add('hidden');
                    moonIcon.classList.remove('hidden');
                }
                const activeLink = allNavLinks.find(link => link.classList.contains(darkActive) || link.classList.contains(lightActive));
                if (activeLink) setActive(activeLink);
            }

            themeToggleBtn.addEventListener('click', () => {
                htmlEl.classList.toggle('dark');
                htmlEl.classList.toggle('light');
                updateThemeIcons();
            });

             // --- Contact Modal Logic ---
            const contactTrigger = document.getElementById('contact-trigger');
            const contactModal = document.getElementById('contact-modal');
            const closeContactModal = document.getElementById('close-contact-modal');
            const contactForm = document.getElementById('contact-form');
             const copyEmailButton = document.getElementById('copy-email-button');

            contactTrigger.addEventListener('click', () => {
                contactModal.classList.remove('hidden');
                contactModal.querySelector('.glass-card').classList.add('animate-content-enter');
            });
            closeContactModal.addEventListener('click', () => {
                contactModal.classList.add('hidden');
            });
             contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) {
                    contactModal.classList.add('hidden');
                }
            });
            contactForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const subject = document.getElementById('subject').value;
                const body = document.getElementById('message').value;
                const mailtoLink = `mailto:sb2442265@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                window.location.href = mailtoLink;
            });
            
            copyEmailButton.addEventListener('click', () => {
                const email = 'sb2442265@gmail.com';
                const textArea = document.createElement('textarea');
                textArea.value = email;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    const originalIcon = copyEmailButton.innerHTML;
                    copyEmailButton.innerHTML = '<i data-lucide="check" class="w-4 h-4 text-green-400"></i>';
                    lucide.createIcons();
                    setTimeout(() => {
                        copyEmailButton.innerHTML = originalIcon;
                        lucide.createIcons();
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(textArea);
            });
            
            // --- Support Modal Logic ---
            const supportButton = document.getElementById('support-button');
            const supportModal = document.getElementById('support-modal');
            const closeModalButton = document.getElementById('close-modal');
            const copyAddressButton = document.getElementById('copy-address');
            const walletAddress = document.getElementById('wallet-address');

            supportButton.addEventListener('click', () => {
                supportModal.classList.remove('hidden');
                supportModal.querySelector('.glass-card').classList.add('animate-content-enter');
            });

            closeModalButton.addEventListener('click', () => {
                supportModal.classList.add('hidden');
            });

            supportModal.addEventListener('click', (e) => {
                if (e.target === supportModal) {
                    supportModal.classList.add('hidden');
                }
            });

            copyAddressButton.addEventListener('click', () => {
                const textToCopy = walletAddress.textContent;
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    const originalIcon = copyAddressButton.innerHTML;
                    copyAddressButton.innerHTML = '<i data-lucide="check" class="w-4 h-4 text-green-400"></i>';
                    lucide.createIcons();
                    setTimeout(() => {
                        copyAddressButton.innerHTML = originalIcon;
                        lucide.createIcons();
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(textArea);
            });

             // --- Language Toggle Logic ---
            const languageToggle = document.getElementById('language-toggle');
            const langCharEn = document.getElementById('lang-char-en');
            const langCharJp = document.getElementById('lang-char-jp');
            let currentLang = 'en';

            function setLanguage(lang) {
                document.documentElement.lang = lang;
                const elements = document.querySelectorAll('[data-translate]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-translate');
                    const translation = translations[lang][key];
                    if(translation) {
                        if (el.getAttribute('data-is-list')) {
                            el.innerHTML = translation.map(item => `<li>${item}</li>`).join('');
                        } else {
                            el.innerHTML = translation;
                        }
                    }
                });
                 // Re-initialize lucide icons if they are part of the translated content
                lucide.createIcons();
            }

            languageToggle.addEventListener('click', () => {
                currentLang = (currentLang === 'en') ? 'jp' : 'en';
                if (currentLang === 'en') {
                    langCharJp.classList.remove('hidden');
                    langCharEn.classList.add('hidden');
                } else {
                    langCharJp.classList.add('hidden');
                    langCharEn.classList.remove('hidden');
                }
                setLanguage(currentLang);
            });
            
             // Easter Egg to reveal language toggle
            const expHeading = document.getElementById('experience-heading-trigger');
            if (expHeading) {
                let clickCount = 0;
                let clickTimer = null;
                expHeading.addEventListener('click', () => {
                    clickCount++;
                    if (clickCount === 1) {
                        clickTimer = setTimeout(() => {
                            clickCount = 0;
                        }, 400); // Reset after 400ms
                    } else if (clickCount === 3) {
                        clearTimeout(clickTimer);
                        clickCount = 0;
                        languageToggle.classList.toggle('hidden');
                    }
                });
            }


            // --- Initial Calls ---
            mainPage.classList.add('animate-content-enter');
            setActive(null);
            updateThemeIcons();
            updateTime();
            setInterval(updateTime, 30000);
            animateClock();
            fetchLeetCodeStats();
            setupGlobe();
        });
